[workspace]
authors = ["roaldarbol <>"]
channels = ["conda-forge"]
name = "idtracker-local"
platforms = ["win-64"]
version = "0.1.0"

[system-requirements]
cuda = "12"

[tasks]
gui = { cmd = "nu track.nu gui", description = "Open file dialog, create folders, and launch idtrackerai" }
init = { cmd = "nu track.nu init", description = "Scan settings folder, populate tracking CSV" }
track = { cmd = "nu track.nu track", depends-on = ["init"], description = "Run all pending tracking jobs" }
track-dryrun = { cmd = "nu track.nu track --dry-run", depends-on = ["init"], description = "Dry run track without invoking idtrackerai" }
copy = { cmd = "nu track.nu copy", description = "Copy latest trajectories.h5 for all completed sessions" }
status = { cmd = "nu track.nu status", description = "Print tracking job status summary" }
fix-paths = { cmd = "nu track.nu fix-paths", description = "Fix double-escaped UNC paths in settings files" }
check-gpu = { cmd = "python -c \"import torch; print('CUDA available:', torch.cuda.is_available()); print('Device count:', torch.cuda.device_count()); print('Device name:', torch.cuda.get_device_name(0) if torch.cuda.is_available() else 'N/A')\"", description = "Check whether PyTorch detects a CUDA GPU" }
docs = { cmd = "python -c \"from rich.markdown import Markdown; from rich.console import Console; Console().print(Markdown(open('README.md').read()))\"", description = "Display the README in the terminal" }

[dependencies]
nushell = ">=0.110.0,<0.111"
idtrackerai = ">=6.0.13,<7"
pytorch-gpu = ">=2.10.0,<3"
torchvision = ">=0.25.0,<0.26"
